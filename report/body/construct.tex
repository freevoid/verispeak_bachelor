\chapter{Конструкторский раздел}
Данный раздел содержит описание архитектуры разрабатываемого программного комплекса, а также ключевые алгоритмы, описывающие логику разрабатываемой системы.

\section{Общая архитектура разрабатываемого комплекса}
\label{sec:main_arch}

В разрабатываемом программном комплексе можно выделить три основные подсистемы:
\begin{itemize}
\item Подсистема голосовой аутентификации -- ядро программного комплекса, реализующее подходы, выбранные в результате обзора существующих решений в разделе~\ref{sec:overview};
\item Подсистема хранения речевых данных пользователей (база данных);
\item Интерфейс пользователя -- приложение, позволяющее пользователю производить регистрацию и аутентификацию в системе, реализующее передачу данных с микрофона пользователя на сервер (для сохранения в базе данных и последующей обработки).
\end{itemize}

Общая архитектура комплекса представлена на рисунке~\ref{fig:main_arch}.

\begin{figure}
    \center{\includegraphics[width=0.8\textwidth]{include/main_arch_dia.pdf}}
    \caption{Общая архитектура разрабатываемого программного комплекса}
    \label{fig:main_arch}
\end{figure}

\section{Варианты использования}

На рисунке~\ref{fig:use_cases} представлена диаграмма вариантов использования системы.

\begin{figure}[htp!]
    \center{\includegraphics[width=0.8\textwidth]{include/use_cases_dia.pdf}}
    \caption{Диаграмма вариантов использования системы}
    \label{fig:use_cases}
\end{figure}

\section{Подсистема голосовой аутентификации}

На рисунке~\ref{fig:enrollment_server_sd} представлена диаграмма состояний для процесса регистрации пользователя в системе голосовой аутентификации (то есть процесса обучения новой модели по речевым данным пользователя).

\begin{figure}
    \center{\includegraphics[width=0.8\textwidth]{include/enrollment_server_sd_dia.pdf}}
    \caption{Диаграмма состояний для процесса обучения модели (сервер)}
    \label{fig:enrollment_server_sd}
\end{figure}

\begin{figure}
    \center{\includegraphics[width=0.9\textwidth]{include/enrollment_client_sd_dia.pdf}}
    \caption{Диаграмма состояний для процесса обучения модели (клиент)}
    \label{fig:enrollment_client_sd}
\end{figure}

\begin{figure}
    \center{\includegraphics[width=0.8\textwidth]{include/verification_server_sd_dia.pdf}}
    \caption{Диаграмма состояний для процесса аутентификации (сервер)}
    \label{fig:verification_server_sd}
\end{figure}

\begin{figure}
    \center{\includegraphics[width=0.9\textwidth]{include/verification_client_sd_dia.pdf}}
    \caption{Диаграмма состояний для процесса аутентификации (клиент)}
    \label{fig:verification_client_sd}
\end{figure}

На рисунке~\ref{fig:idef0_main} показана диаграмма функциональных блоков для процесса верификации.

\begin{figure}
    \center{
    \begin{sideways}
        \includegraphics[width=0.9\textheight]{include/idef0_main_dia.pdf}
    \end{sideways}
    }
    \caption{Диаграмма функциональных блоков A0: процесс верификации}
    \label{fig:idef0_main}
\end{figure}

\begin{figure}
    \center{
    \begin{sideways}
    \includegraphics[width=0.9\textheight]{include/idef0_pre_dia.pdf}
    \end{sideways}
    }
    \caption{Диаграмма функциональных блоков A1: подготовка входных данных}
    \label{fig:idef0_pre}
\end{figure}

\begin{figure}
    \center{
    \input{tex_include/seq_enrollment_embedded.tex}
    }
    \caption{Диаграмма последовательности: процесс регистрации в системе}
    \label{fig:seq_enrollment}
\end{figure}


\begin{figure}
    \center{
    \input{tex_include/seq_verification_embedded.tex}
    }
    \caption{Диаграмма последовательности: процесс аутентификации}
    \label{fig:seq_verification}
\end{figure}

\section{Подсистема хранения голосовых данных}

На рисунке~\ref{fig:er_main} представлена диаграмма сущность-связь для разрабатываемой базы данных. Рассмотрим подробнее сущности, представленные на данной диаграмме:

\begin{itemize}
\item Пользователь;
\item Модель говорящего;
\item Сессия записи;
\item Сессия верификации;
\item Сессия регистрации;
\item Записанное высказывание;
\item Обучение;
\item Аутентификация.
\end{itemize}

\begin{figure}
    \input{tex_include/er_main_embedded.tex}
    %\center{\drawER{0.65}{1.0cm}}
    \center{\includegraphics[width=\textwidth]{include/er_main_tex.pdf}}
    \caption{Диаграмма сущность-связь подсистемы хранения голосовых данных}
    \label{fig:er_main}
\end{figure}

%Следует отметить, что база данных предназначена для хранения вспомогательной информации, тогда как непосредственно голосовые данные должны храниться 

\section{Основные алгоритмы}

\subsection{Удаление тишины}

Как для процесса обучения, так и для процесса аутентификации, для достижения адекватных показателей ошибок необходима нормализация входных речевых данных. Одним из наиболее важных этапов при применении гауссовых смесей\footnote{Причиной важности является тексто-независимость метода. Паузы между словами и предложениями можно рассматривать как характерные признаки источника речи, однако, используемый метод предназначен для моделирования характеристик вокального тракта человека, а не столь высокоуровневых признаков.} является выделение из речевых данных только тех, которые вероятнее содержат речь, а не внешний шум.

Для отделения во входном сигнале речи от условной тишины (постоянного внешнего шума, создаваемого окружением) был разработан специализированный алгоритм, блок-схема которого показана на рисунке~\ref{fig:silence_remove_flowchart}.

\begin{figure}
    \center{
    \def\svgwidth{1.2\textwidth}
    \includesvg{silence_remove_flowchart}
    }
    \caption{Блок-схема алгоритма удаления <<тишины>> из входного сигнала}
    \label{fig:silence_remove_flowchart}
\end{figure}

